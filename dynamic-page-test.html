<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

<link rel="stylesheet" type="text/css" href="http://code.jquery.com/mobile/1.0a4.1/jquery.mobile-1.0a4.1.min.css"/>
<script type="text/javascript" charset="utf-8" src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.1/jquery.min.js"></script>
<script>
$(document).ready(function() {

    //check if hash exists and that it is not for the home screen
    if (window.location.hash != '' && window.location.hash != '#page_0') {

        //set whatever content you want to put into the new page
        var content_string = 'Some ' + window.location.hash + ' text...<br><br><a href="#page_0">go to home screen</a>';

        //append the new page onto the end of the body
        $('#page_body').append('<div data-role="page" id="' + window.location.hash.replace('#','') + '"><div data-role="content">' + content_string + '</div></div>');

        //add a link on the home screen to navaigate to the new page (just so nav isn't broken if user goes from new page to home screen)
        $('#page_0 div[data-role="content"]').append('<li><a href="#' + window.location.hash.replace('#','') + '">go to ' + window.location.hash.replace('#','') + ' page</a></li>');
    }
    
    //create a new page
    for (var i = 0; i < 4; i++) {
      create_page(i);
    }
    
});


function create_page(page_id) {

    //New Page
    
    //set whatever content you want to put into the new page
    var string = '<a href="#page_0">Go Back</a> content';

    //append the new page onto the end of the body
    $('#page_body').append('<div data-role="page" id="' + page_id + '"><div data-role="header"><h1>' + page_id + '</h1></div><div data-role="content">' + string + '</div><div data-role="footer"><h4>Page Footer</h4></div></div>');

    //initialize the new page 
    $.mobile.initializePage();

    //navigate to the new page
    //$.mobile.changePage("#" + page_id, "pop", false, true);

    //add a link on the home screen to navaigate to the new page (just so nav isn't broken if user goes from new page to home screen)
    $('#page_0 div[data-role="content"] ul.places-nearby').append('<li><a href="#' + page_id + '">' + page_id + ' </a></li>');

    $('ul.places-nearby').listview('refresh');
    
    //refresh the home screen so new link is given proper css
    $('#page_0 div[data-role="content"]').page();
}

</script>
<title>Fixed Headers Example</title>
<script src="http://code.jquery.com/mobile/1.0a4.1/jquery.mobile-1.0a4.1.min.js"></script>

</head>

<body id="page_body">
  <div data-role="page" id="page_0">
    <div data-role="header" data-position="fixed">
  		<h1>Places</h1>
  		<a href="#" data-icon="refresh" class="" onclick='getLocation()'>Find</a>

  	</div><!-- /header -->

  	<div data-role="content">

  		<ul class="places-nearby" data-role="listview" data-filter="true" data-filter-reveal="false" data-filter-placeholder="Choose a favorite place">
  			<div id="map_canvas" style="width:250px;height:250px"></div>	

  			<!-- <li><a href="#judah" data-transition="slide">Judah</a></li> -->

  		</ul>

  	</div><!-- /content -->

  	<div data-role="footer" data-id="places" data-position="fixed" class="nav-glyphish-example">
  		<div data-role="navbar" class="nav-glyphish-example">
  			<ul>
  				<li><a href="#places" class="ui-btn-active ui-state-persist" id="beer" data-icon="custom">Places</a></li>
  				<li><a href="#favorites" data-transition="none" id="beer" data-icon="custom">My favorites</a></li>
  			</ul>
  		</div><!-- /navbar -->
  	</div><!-- /footer -->

</div>


</body>
</html>